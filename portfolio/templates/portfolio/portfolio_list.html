{% extends 'base.html' %}
{% load static %}

{% block title %}Portfolio â€“ Django and TailwindCSS Projects{% endblock %}

{% block content %}
<section class="px-6 md:px-16 py-12 bg-slate-100 text-gray-900">
  <div class="max-w-7xl mx-auto">

    <!-- Page Heading -->
    <header class="mb-12 space-y-4">
      <h1 class="text-3xl md:text-4xl font-semibold text-gray-900 leading-normal mt-16">
        My Portfolio Projects
      </h1>
      <p class="leading-normal text-gray-600">
        Explore my recent work, latest web development projects and experiments. Each project taught me something new - from structuring APIs to designing user flows that feel intuitive.
      </p>
    </header>

    <!-- Technology Filter -->
    <div class="flex flex-wrap gap-3 mt-8 mb-12">
      {% for tech in technologies %}
        <a href="{% url 'portfolio:by_technology' tech.slug %}"
          class="inline-flex items-center px-4 py-2 border border-gray-400 text-gray-700 rounded-md font-medium text-sm hover:bg-gray-900 hover:text-white hover:border-gray-900 transition-colors">
          {{ tech.name }}
        </a>
      {% endfor %}
    </div>

    <!-- Project Grid -->
    {% if not portfolios %}
      <div class="text-center p-8 rounded-lg bg-white border border-gray-200">
        <p class="text-gray-600">No portfolio items available yet.</p>
      </div>
    {% else %}
      
      <!-- Horizontal Bento Grid - 12 columns, fixed row height -->
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-12 gap-4 auto-rows-[320px] bg-white">
        
        {% for portfolio in portfolios %}
          {% cycle 'wide' 'narrow' 'narrow' 'narrow' 'wide' 'narrow' as position silent %}
          
          <article class="group bg-white rounded-xl border border-gray-200 overflow-hidden hover:shadow-lg hover:border-gray-300 transition-all flex flex-col
            {% if position == 'wide' %}
              sm:col-span-2 lg:col-span-6
            {% else %}
              sm:col-span-1 lg:col-span-3
            {% endif %}
          ">
            
            {% if portfolio.display_image %}
              <div class="{% if position == 'wide' %}h-44{% else %}h-36{% endif %} w-full overflow-hidden flex-shrink-0">
                <img src="{{ portfolio.display_image }}"
                     alt="{{ portfolio.title }}"
                     class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105" />
              </div>
            {% endif %}
            
            <div class="p-5 flex-grow flex flex-col min-h-0">
              {% if portfolio.is_featured %}
                <span class="text-xs font-medium uppercase tracking-wider text-gray-500 mb-1">Featured</span>
              {% endif %}
              
              <h3 class="text-lg font-semibold text-gray-900 mb-2 line-clamp-2">
                {{ portfolio.title }}
              </h3>
              
              <p class="text-gray-600 text-sm mb-4 flex-grow line-clamp-3">
                {{ portfolio.short_description|striptags|truncatewords:25 }}
              </p>
              
              <a href="{% url 'portfolio:detail' portfolio.slug %}"
                 class="inline-flex items-center text-gray-900 hover:text-gray-600 font-medium text-sm transition-colors mt-auto">
                View Details
                <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                </svg>
              </a>
            </div>
          </article>
          
        {% endfor %}
        
      </div>

    {% endif %}
  </div>
</section>
{% endblock %}